# Анализ вакансий с портала хэдхантер (NLP+ML)

---

## 1. Постановка задачи

### Исследовательская задача

Цель проекта — провести комплексный анализ вакансий Москвы и выявить факторы, влияющие на уровень заработной платы, а также оценить вклад текстовой информации и профессиональных навыков в объяснение различий оплаты труда.

### Основные исследовательские вопросы

1. Какие характеристики вакансии связаны с уровнем заработной платы?
2. Существуют ли статистически значимые различия в зарплате между различными группами вакансий?
3. Какие профессиональные навыки ассоциированы с более высоким уровнем оплаты?
4. Улучшают ли текстовые признаки качество модели предсказания зарплаты по сравнению с использованием только структурных метаданных?

---

## 2. Описание этапов работы

Проект реализован как последовательный аналитический пайплайн: от сбора данных до построения итоговой модели.

---

## Этап 0. Сбор данных

### Что сделано:
- Использован API hh.ru.
- Загружены вакансии по Москве.
- Получены структурные признаки (опыт, график, занятость, профессиональная роль и др.).
- Сохранены текстовые поля (название, описание, ключевые навыки).

### Почему выбран этот подход:
Использование API обеспечивает воспроизводимость и масштабируемость анализа, а также позволяет работать с реальными рыночными данными.

---

## Этап 1. Подготовка данных

### Что сделано:
- Очистка данных и приведение типов.
- Создание целевой переменной "salary_mid" как средней между "salary_from" и "salary_to".
- Удаление вакансий без указания заработной платы.
- Исключение валют, отличных от рублей.
- Формирование датасета `df_salary` для дальнейшего анализа.

### Обоснование:
Для статистического анализа и машинного обучения необходима корректная числовая целевая переменная. Исключение нерелевантных наблюдений снижает риск искажения результатов.

---

## Этап 2. Разведочный анализ данных (EDA)

### Что сделано:
- Анализ распределения заработной платы.
- Оценка асимметрии распределения (skewness).
- Логарифмирование целевой переменной.
- Анализ медианных зарплат по:
  - уровню опыта,
  - профессиональной роли,
  - типу графика работы,
  - типу занятости.

### Анализ навыков (в рамках EDA):
- Частотный анализ ключевых навыков (топ-20).
- Расчёт медианной зарплаты по отдельным навыкам (при достаточном числе наблюдений).
- Выделение навыков, ассоциированных с более высокой и более низкой оплатой.

### Почему:
EDA позволяет выявить закономерности и подготовить основу для формальной проверки гипотез.

---

## Этап 3. Статистический анализ гипотез

Проверены следующие гипотезы:

1. Влияние типа графика работы на заработную плату.
2. Влияние уровня опыта на заработную плату.
3. Влияние профессиональной роли на заработную плату.
4. Влияние наличия навыка PostgreSQL на заработную плату.

### Методы:
- Mann–Whitney U-test (для двух групп).
- Kruskal–Wallis test (для нескольких групп).
- Оценка размера эффекта для отдельных факторов.

### Обоснование выбора:
Распределение заработной платы является асимметричным, поэтому применялись непараметрические методы.

---

## Этап 4. NLP-анализ текстов вакансий

### Что сделано:
- Проведена очистка текста (удаление стоп-слов и служебных символов).
- Выполнена лемматизация для нормализации словоформ.
- Построено TF-IDF представление текстов вакансий.
- Выявлены термины, характерные для различных уровней заработной платы.
- Текстовые признаки использованы в регрессионных моделях.

### Обоснование выбора методов:
- Лемматизация снижает разреженность признакового пространства и объединяет различные формы одного слова.
- TF-IDF выбран как интерпретируемый и устойчивый метод векторизации текста.
- Метод подходит для сравнительного анализа и выявления содержательных различий между группами вакансий.

### Цель этапа:
Оценить, содержит ли текст вакансии дополнительную информацию о сложности позиции и уровне оплаты труда, а также определить вклад текстовых признаков в объяснение и прогнозирование заработной платы.

---

## Этап 5. Кластеризация вакансий

### Что сделано:
- Сформировано признаковое пространство на основе текстовых (TF-IDF) и структурных характеристик вакансий.
- Применён алгоритм KMeans для выделения групп вакансий без заранее заданных меток.
- Определено оптимальное число кластеров.
- Проведена интерпретация полученных сегментов через анализ медианных зарплат, профессиональных ролей и характерных терминов.

### Обоснование выбора методов:
- KMeans выбран как устойчивый и масштабируемый алгоритм кластеризации.
- Метод минимизирует внутрикластерную дисперсию.
- Более стабилен при работе с большим числом признаков и наблюдений.

### Цель:
Выделить сегменты рынка труда и оценить различия между ними по уровню заработной платы.

---

## Этап 6. ML — регрессия заработной платы

### Что сделано:
- Построены регрессионные модели для предсказания "salary_mid".
- Реализованы три варианта:
  1. Модель на основе только структурных метаданных.
  2. Модель на основе текстовых признаков (TF-IDF).
  3. Комбинированная модель (метаданные + текст).
- Использована Ridge Regression как основная модель.
- Проведено сравнение качества моделей по метрикам MAE, RMSE и R².
- Обучение выполнено как на исходной зарплате, так и на логарифмированной целевой переменной.

### Обоснование выбора метода:
- Ridge Regression обеспечивает устойчивость при высокой размерности данных.
- Логарифмирование целевой переменной уменьшает влияние выбросов.
- Использование нескольких метрик позволяет комплексно оценить качество модели.

### Цель этапа:
Сравнить вклад различных типов признаков в задачу прогнозирования заработной платы.

---

## 3. Выводы по этапам

### После EDA
- Распределение зарплаты имеет выраженную правостороннюю асимметрию.
- Наблюдается последовательный рост медианной зарплаты с увеличением уровня опыта.
- Профессиональные роли демонстрируют существенную дифференциацию по уровню оплаты.
- Отдельные навыки ассоциированы с заметными различиями в медианной зарплате.
- Тип занятости и график работы демонстрируют различия в уровне оплаты.

### После статистического анализа
- Наиболее выраженное влияние оказывает требуемый опыт работы.
- Профессиональная роль является статистически значимым фактором.
- Тип графика работы статистически связан с уровнем заработной платы.
- Наличие навыка PostgreSQL связано с существенным увеличением уровня оплаты.

### После NLP-анализа
- Выявлены устойчивые различия между высоко- и низкооплачиваемыми позициями.
- Высокие зарплаты чаще связаны с управленческой и проектной деятельностью.
- Низкие зарплаты — с операционными и сервисными функциями.
- Различия по ряду терминов статистически значимы (χ², p < 0.001).

### После кластеризации

- С помощью KMeans выделены сегменты вакансий на основе текстовых и структурных признаков.
- Кластеры интерпретируются как отдельные функциональные направления (продажи, сервис, разработка, административная деятельность и др.).
- Между кластерами наблюдаются различия в уровне медианной заработной платы.
- Высокооплачиваемые вакансии чаще сосредоточены в кластерах, связанных с управленческими и проектными функциями.

### После машинного обучения
- Модели только на метаданных демонстрируют умеренное качество.
- Использование текстовых признаков улучшает результаты.
- Комбинированная модель показывает наилучшее качество.
- Логарифмирование повышает устойчивость модели.

---

## 4. Общие выводы и рекомендации

Проведённый анализ показал, что уровень заработной платы в вакансиях Москвы формируется под воздействием совокупности структурных, профессиональных и содержательных факторов.

### Ключевые закономерности

- **Уровень профессионального опыта** является наиболее устойчивым и сильным фактором роста дохода: медианная заработная плата последовательно увеличивается с ростом стажа. При этом распределения частично перекрываются — в группе без опыта встречаются предложения, сопоставимые с вакансиями для специалистов с опытом более 6 лет. С увеличением опыта возрастает вариативность заработной платы и межквартильный размах, что отражает расширение спектра позиций и уровней ответственности.

- **Профессиональная роль** демонстрирует значительную дифференциацию доходов. Наиболее высокий уровень оплаты характерен для IT-специалистов и руководителей проектов, а также отдельных инженерных и медицинских позиций. Административные, сервисные и вспомогательные роли характеризуются более низкими медианными значениями.

- **Тип занятости и график работы** также влияют на уровень оплаты. Наиболее высокая медианная зарплата наблюдается при вахтовом методе работы, что объясняется спецификой условий труда. Полная занятость оплачивается выше частичной, что отражает экономическую логику формата занятости. Однако влияние этих факторов менее выражено по сравнению с уровнем опыта.

- **Профессиональные навыки** демонстрируют неоднородную связь с уровнем дохода. Частотный анализ показывает доминирование коммуникативных и продажных компетенций, что отражает структуру выборки. В то же время анализ медианных зарплат выявляет навыки, ассоциированные с более высокой оплатой (например, PostgreSQL, Git, API), а также управленческие компетенции.

- Корреляционный анализ показал отсутствие выраженной линейной связи между зарплатой и длиной текста вакансии либо количеством указанных навыков. Это свидетельствует о том, что уровень оплаты определяется прежде всего **типом позиции и уровнем ответственности**, а не объёмом описания.

- NLP-анализ подтвердил, что **текст вакансии несёт дополнительную информацию**: высокооплачиваемые позиции чаще связаны с управленческими, проектными и стратегическими функциями, тогда как низкооплачиваемые — с операционными и сервисными задачами.

Таким образом, заработная плата отражает не только формальные параметры вакансии, но и степень ответственности, функциональную сложность и характер выполняемых задач.

---

### Практические рекомендации

- Соискателям: фокус на развитии специализированных технических и управленческих компетенций существенно повышает рыночную стоимость.
- Работодателям: формирование конкурентных зарплатных вилок должно учитывать не только формальный опыт, но и уровень ответственности и сложность задач.
- HR-аналитикам: при прогнозировании уровня оплаты целесообразно учитывать текстовые характеристики вакансий наряду со структурными метаданными.
- При интерпретации данных важно учитывать структурные особенности выборки (высокая доля вакансий в сфере продаж и сервиса).

---


### Ограничения исследования

- В анализ включены только вакансии с указанной заработной платой.
- Данные отражают предложения работодателей, а не фактические выплаты.
- Возможна неоднородность сфер деятельности.
- Текстовый анализ не учитывает скрытый контекст формулировок.


